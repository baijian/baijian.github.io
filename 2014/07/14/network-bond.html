<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>network-bond</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="site">
          <div class="header">
            <h1 class="title"><a href="/">Too young too simple and too naive</a></h1>
            <a class="extra" href="/">home</a>
            <a class="extra" href="/recomend.html">阿里内推</a>
          </div>

          <h2>network-bond</h2>
<p class="meta">14 Jul 2014</p>

<div class="post">
<p>多网卡有7种bond模式</p>

<h3>实践</h3>

<p>2个物理网口分别是:eth0, eth1
绑定后的虚拟口为: bond0
服务器ip地址为: 10.125.250.5</p>

<p>step1:</p>

<p>/etc/sysconfig/network-scripts/ifcfg-bond0内容如下:
<code>
DEVICE=bond0
BOOTPROTO=none
IPADDR=10.125.250.5
NETMASK=250.250.250.0
NETWORK=10.125.250.0
BROADCAST=10.125.250.255
</code>
/etc/sysconfig/network-scripts/ifcfg-eth0
<code>
DEVICE=eth0
BOOTPROTO=none
MASTER=bond0
SLAVE=yes
</code></p>

<p>/etc/sysconfig/network-scripts/ifcfg-eth1
<code>
DEVICE=eth1
BOOTPROTO=none
MASTER=bond0
SLAVE=yes
</code></p>

<p>step2:</p>

<p>修改modprobe相关设置,加载bonding模块</p>

<p>touch /etc/modprobe.d/bonding.conf
<code>
alias bond0 bonding
options bonding mode=0 miimon=200
</code></p>

<p>modprobe bonding</p>

<p>lsmod | grep bonding</p>

<p>step 3:</p>

<p>/etc/init.d/network restart</p>

<p>cat /proc/net/bonding/bond0</p>

<p>ifconfig | grep HWaddr</p>

</div>



<section>
<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
var disqus_shortname = 'baijian'; // required: replace example with your forum shortname

/* * * DON'T EDIT BELOW THIS LINE * * */
(function() {
 var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
 dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
 (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
 })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

</section>




          

    </body>
    
        <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-49477407-1', 'joinjoy.me');
    ga('send', 'pageview');

</script>

    
</html>
